# ğŸ“†íˆ¬ë‘ì•± ë°±ì—”ë“œ ì„œë²„ ë§Œë“¤ê¸°

Spring ê³¼ì œë¡œ íˆ¬ë‘ì•± ë°±ì—”ë“œ ì„œë²„ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. <br/>

ì œëª©ê³¼ ë‚´ìš©ì„ ì ìœ¼ë©´ í•  ì¼ ì¹´ë“œê°€ ìƒì„±ë˜ë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. <br/>

í•  ì¼ ì¹´ë“œì— ëŒ€í•´ì„œëŠ” ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œê°€ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## ëª©ì°¨
- [ìš”êµ¬ ì‚¬í•­](#ìš”êµ¬-ì‚¬í•­)
- [WHY?](#why)
- [ê¸°íš ë° ì„¤ê³„](#ê¸°íš-ë°-ì„¤ê³„)
- [ì½”ë“œ êµ¬ì¡°](#ì½”ë“œ-êµ¬ì¡°)

## ìš”êµ¬ ì‚¬í•­

<details>
<summary>STEP 1</summary><div>
  
**í•  ì¼ ì¹´ë“œ ì‘ì„± ê¸°ëŠ¥**
  > - `í•  ì¼ ì œëª©`, `í•  ì¼ ë‚´ìš©`, `ì‘ì„±ì¼`, `ì‘ì„±ì ì´ë¦„`ì„ ì…ë ¥ë°›ì•„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì €ì¥ëœ í•  ì¼ì˜ ì •ë³´ë¥¼ ë°˜í™˜ë°›ì•„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì„ íƒí•œ í•  ì¼ ì¡°íšŒ ê¸°ëŠ¥**
  > - ì„ íƒí•œ í•  ì¼ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ë°˜í™˜ë°›ì€ í•  ì¼ ì •ë³´ì—ëŠ” `í•  ì¼ ì œëª©`, `í•  ì¼ ë‚´ìš©`, `ì‘ì„±ì¼`, `ì‘ì„±ì ì´ë¦„`ì„ ì •ë³´ê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.

**í•  ì¼ ì¹´ë“œ ëª©ë¡ ì¡°íšŒ ê¸°ëŠ¥**
  > - ë“±ë¡ëœ í•  ì¼ ì „ì²´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì¡°íšŒëœ í•  ì¼ ëª©ë¡ì€ ì‘ì„±ì¼ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**ì„ íƒí•œ í•  ì¼ ìˆ˜ì • ê¸°ëŠ¥**
  > - ì„ íƒí•œ í•  ì¼ì˜ `í•  ì¼ ì œëª©`, `í•  ì¼ ë‚´ìš©`, `ì‘ì„±ì ì´ë¦„`ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ìˆ˜ì •ëœ í•  ì¼ì˜ ì •ë³´ë¥¼ ë°˜í™˜ë°›ì•„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì„ íƒí•œ í•  ì¼ ì‚­ì œ ê¸°ëŠ¥**
  > - ì„ íƒí•œ ê²Œì‹œê¸€ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

</div></details>

<details>
<summary>STEP 2</summary><div>

**í•  ì¼ ì¹´ë“œ ì™„ë£Œ ê¸°ëŠ¥**
  > - ì™„ë£Œ ì²˜ë¦¬í•  í•  ì¼ ì¹´ë“œëŠ” ëª©ë¡ ì¡°íšŒ ì‹œ `ì™„ë£Œ ì—¬ë¶€` í•„ë“œê°€ `TRUE`ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.
  > - `ì™„ë£Œ ì—¬ë¶€` ê¸°ë³¸ ê°’ì€ `FALSE`ì…ë‹ˆë‹¤.

**ëŒ“ê¸€ ì‘ì„± ê¸°ëŠ¥**
  > - `ì‘ì„±ì ì´ë¦„`, `ë¹„ë°€ë²ˆí˜¸`, `ëŒ“ê¸€`ì„ ì…ë ¥ë°›ì•„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì‘ë‹µì—ì„œ `ë¹„ë°€ë²ˆí˜¸`ëŠ” ì œì™¸í•˜ê³  ë“±ë¡ëœ ëŒ“ê¸€ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**ëŒ“ê¸€ ìˆ˜ì • ê¸°ëŠ¥**
  > - `ì‘ì„±ì ì´ë¦„`, `ë¹„ë°€ë²ˆí˜¸`ë¥¼ ì…ë ¥ë°›ì•„ ì €ì¥ëœ ê°’ê³¼ ì¼ì¹˜í•˜ë©´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì‘ë‹µì—ì„œ `ë¹„ë°€ë²ˆí˜¸`ëŠ” ì œì™¸í•˜ê³  ìˆ˜ì •ëœ ëŒ“ê¸€ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**ëŒ“ê¸€ ì‚­ì œ ê¸°ëŠ¥**
  > - `ì‘ì„±ì ì´ë¦„`, `ë¹„ë°€ë²ˆí˜¸`ë¥¼ ì…ë ¥ë°›ì•„ ì €ì¥ëœ ê°’ê³¼ ì¼ì¹˜í•˜ë©´ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì‘ë‹µì—ì„œ ì‚­ì œ ë©”ì‹œì§€ì™€ ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

**ëŒ“ê¸€ ì¡°íšŒ ê¸°ëŠ¥**
  > - STEP 1ì—ì„œ ë§Œë“  í•  ì¼ ì¡°íšŒ APIì˜ ì‘ë‹µì—ì„œ ëŒ“ê¸€ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  > - ì—°ê´€ë˜ì§€ ì•Šì€ ëŒ“ê¸€ì€ í¬í•¨ë˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. 

</div></details>

<details>
<summary>STEP 3</summary><div>
  
**í•  ì¼ ì¹´ë“œ ì •ë ¬ ê¸°ëŠ¥**
  > - APIë¥¼ ìš”ì²­í•  ë•Œ ì •ë ¬(`ì˜¤ë¦„ì°¨ìˆœ`, `ë‚´ë¦¼ì°¨ìˆœ`)ì„ í¬í•¨í•©ë‹ˆë‹¤.
  > - ì •ë ¬ ê¸°ì¤€ì„ í†µí•´ ì •ë ¬í•œ í•  ì¼ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**í•  ì¼ ì¹´ë“œ í•„í„° ê¸°ëŠ¥**
  > - APIë¥¼ ìš”ì²­í•  ë•Œ ì‘ì„±ì ì´ë¦„ ê¸°ì¤€ìœ¼ë¡œ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**í•  ì¼ ì¹´ë“œ ê²€ì¦ ê¸°ëŠ¥**
  > - í•  ì¼ ì¹´ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ ê²€ì‚¬í•©ë‹ˆë‹¤.
  > - í•  ì¼ ì¹´ë“œì˜ ì œëª©ì´ 1ì ì´ìƒ, 200ì ì´í•˜ì¸ì§€ ê²€ì‚¬í•©ë‹ˆë‹¤.
  > - í•  ì¼ ì¹´ë“œì˜ ë³¸ë¬¸ì´ 1ì ì´ìƒ, 1000ì ì´í•˜ì¸ì§€ ê²€ì‚¬í•©ë‹ˆë‹¤.
  > - ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ê¸°ëŠ¥ ì‹¤íŒ¨ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.

**í•  ì¼ ì¹´ë“œ ì‘ë‹µ ì½”ë“œ ë°˜í™˜**
  > - ReponseEntityë¥¼ ì‚¬ìš©í•˜ì—¬ APIì˜ ì‘ë‹µì„ Status ì½”ë“œë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
  > - ì¡°íšŒ ê¸°ëŠ¥ ì„±ê³µ: status 200 OK
  > - ì‘ì„± ê¸°ëŠ¥ ì„±ê³µ: status 201 Created
  > - ìˆ˜ì • ê¸°ëŠ¥ ì„±ê³µ: status 200 OK
  > - ì‚­ì œ ê¸°ëŠ¥ ì„±ê³µ: status 204 No Content
  > - ì‘ì„±, ìˆ˜ì • ê¸°ëŠ¥ ì‹¤íŒ¨: status 400 Bad Request

</div></details>

<details>
<summary>STEP 4</summary><div>
  
**ê°œë°œ ì™„ë£Œ**
  > - ì‚¬ìš©ìê°€ ë§ì•„ì¡Œì„ ë•Œ í˜ì´ì§€ í˜¹ì€ ì¹´ë“œì˜ ê°œìˆ˜ë¥¼ ì§€ì •í•´ì„œ ì¡°íšŒí•©ë‹ˆë‹¤.
  > - íšŒì›ê°€ì…, ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ì¶”í›„ ê°œë°œ ì˜ˆì •**
> - ì¸ì¦, ì¸ê°€ì— ëŒ€í•´ì„œ ìš”ì²­í•œ ì‚¬ìš©ìë¥¼ êµ¬ë¶„í•˜ì—¬ ìˆ˜ì • ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

</div></details>

## WHY?

<details>
<summary>STEP 1</summary><div>
  
Q1. APIì˜ requestë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ì…¨ë‚˜ìš”?
> A. Request Body ë°©ì‹ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br/>
>
> 1. Request Body ë°©ì‹ì´ URLì— JSON ë“±ì˜ ë°ì´í„°ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.<br/>
> 2. ì£¼ì†Œë¥¼ ì´ìš©í•˜ì§€ ì•Šì•„ì„œ ë°ì´í„°ì–‘ì´ ë§ì€ ê²½ìš°ì— ì í•©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

Q2. RESTful í•œ APIë¥¼ ì„¤ê³„í•˜ì…¨ë‚˜ìš”?
> A. ë„¤, ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. <br/>
>
> 1. Resourceì˜ ì´ë¦„ì„ ëª…ì‚¬, ì†Œë¬¸ì, ë³µìˆ˜í˜•ìœ¼ë¡œ ì§€í–¥í•˜ì˜€ìœ¼ë©°, '/'ë¥¼ í†µí•´ ê³„ì¸µ ê´€ê³„ë¥¼ í‘œí˜„í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
  (ì˜ˆ> /todocards) <br/>
> 2. id Resourceë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ Identifierë¥¼ í¬í•¨í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
  (ì˜ˆ> /todocards/{userId}) <br/>
> 3. ì ì ˆí•œ Status Codeë¥¼ ì‘ë‹µí•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
  (ì˜ˆ> TodoCardê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆì„ ë•Œ, ì„±ê³µ Status Codeê°€ 201) <br/>
> 4. Path Variableì„ ì´ìš©í•˜ì—¬ ë³€ìˆ˜ë¥¼ ë°›ì•„ì˜¤ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. <br/>
  (ì˜ˆ> fun getTodoCard(@PathVariable userid: Long))

Q3. ì ì ˆí•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ ì ìš©í•˜ì…¨ë‚˜ìš”?<br/>
> A. Springì˜ Layer êµ¬ì¡°ì™€ DBì— ë§ì¶”ì–´ íŒ¨í‚¤ì§€ë¥¼ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. (Controller , Dto , model , repository , Service)

Q4. API ëª…ì„¸ì„œ ì‘ì„± ê°€ì´ë“œë¼ì¸ê³¼ ë¹„êµí–ˆì„ ë•Œ ìì‹ ì˜ API ëª…ì„¸ì„œ<br/>
> A. ê·œëª¨ê°€ í° í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¼ì„œ ì œì™¸í•œ í•­ëª©ì´ ë§ì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

</div></details>

<details>
<summary>STEP 2</summary><div>

Q1. ì²˜ìŒ ì„¤ê³„í•œ API ëª…ì„¸ì„œì— ë³€ê²½ì‚¬í•­ì´ ìˆì—ˆë‚˜ìš”? ë³€ê²½ë˜ì—ˆë‹¤ë©´ ì–´ë–¤ ì  ë•Œë¬¸ì¼ê¹Œìš”?
> A. ëŒ“ê¸€ ê¸°ëŠ¥ì— ëŒ€í•œ ì¶”ê°€ ì‚¬í•­ì´ ì¡´ì¬í•˜ì˜€ìŠµë‹ˆë‹¤. ê¸°ëŠ¥ì„ ëŠ˜ë¦¬ë©´ ìì—°ìŠ¤ëŸ½ê²Œ API ëª…ì„¸ì„œë„ ëŠ˜ì–´ë‚¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.<br/>

Q2. ì²« ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì— ëŒ€í•´ ì‘ì„±í•´ì£¼ì„¸ìš”!
> A. ì²« ì„¤ê³„ë¥¼ ë””í…Œì¼í•˜ê²Œ í• ìˆ˜ë¡ ì¶”ê°€ ìš”êµ¬ì‚¬í•­ì„ ì ìš©í•  ë•Œ ë³€ê²½ì— ëŒ€í•œ ìˆ˜ê³ ê°€ ì¤„ì–´ë“ ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.<br/>

Q3. ERDë¥¼ ë¨¼ì € ì„¤ê³„í•œ í›„ Entityë¥¼ ê°œë°œí–ˆì„ ë•Œ ì–´ë–¤ ì ì´ ë„ì›€ì´ ë˜ì…¨ë‚˜ìš”?
> A. í…Œì´ë¸”ëª…ê³¼ ì¹¼ëŸ¼ ì´ë¦„ì„ ë¯¸ë¦¬ ì •í•´ë‘ê³ , ì—°ê´€ ê´€ê³„ë¥¼ ì„¤ì •í•´ë‘ì–´ì„œ ì½”ë“œ ë™ì‘ ì„¤ê³„ë¥¼ í¸í•˜ê²Œ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.<br/>

Q4. ëŒ“ê¸€ ì—¬ëŸ¬ ê°œ ë‹¬ë ¤ìˆëŠ” í•  ì¼ì„ ì‚­ì œí•˜ë ¤ê³  í•œë‹¤ë©´ ë¬´ìŠ¨ ë¬¸ì œê°€ ë°œìƒí• ê¹Œìš”? DB í…Œì´ë¸” ê´€ì ì—ì„œ í•´ê²° ë°©ë²•ì´ ë¬´ì—‡ì¼ê¹Œìš”?
> A. ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©° ì‚­ì œ ë™ì‘ì´ ì§„í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br/>
> í•˜ì§€ë§Œ í•  ì¼ì„ ì‚­ì œí•  ë•Œ ëŒ“ê¸€ê¹Œì§€ ì‚­ì œí•  ìˆ˜ ìˆê²Œ CASCADEë¼ëŠ” ì˜ì†ì„± ì „ì´ë¥¼ ì´ìš©í•˜ë©´ í•´ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤.<br/>

Q4. IoC / DIì— ëŒ€í•´ ê°„ëµí•˜ê²Œ ì„¤ëª…í•´ ì£¼ì„¸ìš”.
> A. ê°„ëµí•˜ê²Œ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br/>
> * IoC : ê°ì²´ì˜ ìƒì„±ê³¼ ìƒëª… ì£¼ê¸°ë¥¼ ì™¸ë¶€ì—ì„œ ì œì–´í•˜ëŠ” ë””ìì¸ íŒ¨í„´<br/>
> * DI : ê°ì²´ê°€ í•„ìš”í•œ ì˜ì¡´ì„±ì„ ìì²´ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ” ë””ìì¸ íŒ¨í„´<br/>
>
> âˆ´ DI âŠ‚ IoC

</div></details>

## ê¸°íš ë° ì„¤ê³„

<details>
<summary>STEP 1</summary><div>
  
#### 1. Event Storming

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/e6a10243-5c12-4dbd-931d-1ede39275e36)

#### 2. Use Case Diagram

![20240516_172800](https://github.com/KangBaekho10/TodoApplication/assets/166815465/a9db859b-d5ee-4b4c-aaac-08907ec0e492)

#### 3. API Specification

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/dd4159ce-835f-4eeb-bd0e-7d0739b8d652)

#### 4. ERD

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/f06de950-2c98-4c3d-a748-27a5995d4af8)

</div></details>

<details>
<summary>STEP 2, 3</summary><div>

#### 1. Event Storming

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/5c7dbfdb-3cc4-498a-aab4-4cde2d31902c)

#### 2. Use Case Diagram

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/2aed2a28-08bd-403a-a052-859e5cfc5086)

#### 3. API Specification

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/acacbbb5-4fe8-4158-8ae5-9583fde05b4a)

#### 4. ERD

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/660fa781-6850-45bb-a446-e4252776c1c8)

</div></details>

<details>
<summary>STEP 4</summary><div>

#### 1. Event Storming

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/a90fb0c5-b9fc-43c1-8f36-8c2338f96912)

#### 2. Use Case Diagram

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/2ae4bff6-4df0-4ae2-be77-4597aa227e6b)

#### 3. API Specification

![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/bab663e3-3dcb-4916-b8d4-f73f089f1336)

#### 4. ERD
  
![image](https://github.com/KangBaekho10/TodoApplication/assets/166815465/bdd9230e-fd34-4268-9c22-8ec94a6cbde2)

</div></details>

## ì½”ë“œ êµ¬ì¡°

í•  ì¼ ì¹´ë“œì— ëŒ€í•œ `TodoCard`ì™€ ëŒ“ê¸€ ëŒ€í•œ `Comment`ë¡œ APIë¥¼ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.

Springì˜ Layer êµ¬ì¡°ì™€ DBì— ë§ì¶”ì–´ íŒ¨í‚¤ì§€ë¥¼ `Controller` , `Dto` , `Service` , `Repository`, `Model`ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.

- ë™ì‘ ê³¼ì •

```Kotlin
1) Web Layerì— í•´ë‹¹í•˜ëŠ” 'Controller'ì—ì„œ Clientë¡œë¶€í„° Request ë°›ëŠ”ë‹¤.

2) Requestì— ë§ëŠ” í•¨ìˆ˜ë¥¼ 'Dto'ì—ì„œ ì°¾ì•„ Service Layerì— í•´ë‹¹í•˜ëŠ” 'Service'ë¡œ ë„˜ê²¨ì¤€ë‹¤.

3) 'Service'ì—ì„œëŠ” Requestì— ëŒ€í•œ ì‹¤ì œ ë™ì‘ì´ ì´ë£¨ì–´ì§„ë‹¤. (ì‚½ì…, ìˆ˜ì •, ì‚­ì œ, ì¡°íšŒ)

4) 'Service'ëŠ” Entityë¥¼ í†µí•´ ë™ì‘í•œ Dataë¥¼ Repository Layerì— í•´ë‹¹í•˜ëŠ” 'Repository'ë¡œ ë„˜ê²¨ì¤€ë‹¤.

5) 'Repository'ëŠ” 'Model'ê³¼ ì§ì ‘ ì—°ê²°ë˜ì–´ ìˆê³ , 'Model'ì€ Repositoryì— ì˜í•´ ë„˜ê²¨ë°›ì€ Dataë¥¼ DBì—ì„œ ë™ì‘í•œë‹¤.

6) ë™ì‘í•œ ë‚´ìš©ì€ ë‹¤ì‹œ ì—­ìˆœìœ¼ë¡œ ì§„í–‰í•˜ê³ , Web Layerë¥¼ í†µí•´ Clientì—ê²Œ Response í•´ì¤€ë‹¤.
```

<details>
<summary> TodoCard </summary><div>

- Controller

```Kotlin

// ë‹¨ì¼ ì¹´ë“œ ì¡°íšŒ
fun getTodoCard(@PathVariable userId: Long) : ResponseEntity<TodoCardResponse> {
...
}

// ì „ì²´ ì¹´ë“œ ì¡°íšŒ
fun getTodoCardList(): ResponseEntity<List<TodoCardResponse>> {
...
}

// í•  ì¼ ì¹´ë“œ ìƒì„±
fun createTodoCard(@RequestBody createTodoCardRequest: CreateTodoCardRequest): ResponseEntity<TodoCardResponse> {
...
}

// í•  ì¼ ì¹´ë“œ ìˆ˜ì •
fun updateTodoCard(
    @PathVariable userId: Long,
    @RequestBody updateTodoCardRequest: UpdateTodoCardRequest
) : ResponseEntity<TodoCardResponse> {
...
}

// í•  ì¼ ì¹´ë“œ ì‚­ì œ
fun deleteTodoCard(@PathVariable userId: Long) : ResponseEntity<Unit> {
...
}

```

- Service

```Kotlin

// ë‹¨ì¼ ì¹´ë“œ ì¡°íšŒ
fun getTodoCardById(userId: Long): TodoCardResponse

// ì „ì²´ ì¹´ë“œ ì¡°íšŒ
fun getAllTodoCardList(): List<TodoCardResponse>

// í•  ì¼ ì¹´ë“œ ìƒì„±
fun createTodoCard(request: CreateTodoCardRequest): TodoCardResponse

// í•  ì¼ ì¹´ë“œ ìˆ˜ì •
fun updateTodoCard(userId: Long, request: UpdateTodoCardRequest): TodoCardResponse

// í•  ì¼ ì¹´ë“œ ì‚­ì œ
fun deleteTodoCard(userId: Long)

```

- Repository

```Kotlin

interface TodoCardRepository: JpaRepository<TodoCard, Long> {}

```

- Model

```Kotlin
...
// 1:N
// DATAì— ë§ëŠ” DB Columnì„ ì§€ì •
class TodoCard (
...
    @OneToMany(mappedBy = "todoCard", fetch = FetchType.LAZY, cascade = [CascadeType.ALL], orphanRemoval = true)
    val comment: MutableList<Comment> = mutableListOf()
...
)

// Column ì¼ì¹˜í•˜ëŠ” ê³³ì— DATA ì‚½ì…
fun TodoCard.toResponse(): TodoCardResponse { 
...
}

```

</div></details>

<details>
<summary> Comment </summary><div>

- Controller

```Kotlin

// ëŒ“ê¸€ ìƒì„±
fun createComment(
  @PathVariable userId: Long,
  @RequestBody commentRequest: CommentRequest
): ResponseEntity<CommentResponse> {
...
}

// ëŒ“ê¸€ ìˆ˜ì •
fun updateComment(
  @PathVariable userId: Long,
  @PathVariable commentId: Long,
  @RequestBody commentRequest: CommentRequest
): ResponseEntity<CommentResponse> {
...
}

// ëŒ“ê¸€ ì‚­ì œ
fun updateComment(
  @PathVariable userId: Long,
  @PathVariable commentId: Long,
  @RequestBody commentRequest: CommentRequest
): ResponseEntity<CommentResponse> {
...
}

```

- Service

```Kotlin

// ëŒ“ê¸€ ì¡°íšŒ (í•  ì¼ ì¹´ë“œì—ì„œ ì¡°íšŒ ê°€ëŠ¥)
fun getComment(commentId : Long) : CommentResponse

// userIdë¡œ í•  ì¼ ì¹´ë“œë¥¼ ì§€ì •í•˜ì—¬ ëŒ“ê¸€ ìƒì„±
fun createComment(userId: Long, request: CommentRequest) : CommentResponse

// userIdë¡œ í•  ì¼ ì¹´ë“œë¥¼ ì§€ì •í•˜ì—¬ ëŒ“ê¸€ ìˆ˜ì •
fun updateComment(userId: Long, commentId: Long, request: CommentRequest) : CommentResponse

// userIdë¡œ í•  ì¼ ì¹´ë“œë¥¼ ì§€ì •í•˜ì—¬ ëŒ“ê¸€ ì‚­ì œ
fun deleteComment(userId: Long, commentId: Long, request: DeleteCommentRequest)

```

- Repository

```Kotlin

interface CommentRepository: JpaRepository<Comment, Long> {
    fun findByTodoCardUseridAndCommentid(userId: Long, commentId: Long): Comment?
}

```

- Model

```Kotlin

class Comment (
...
// N:1
// DATAì— ë§ëŠ” DB Column ì§€ì •
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userid")
    val todoCard: TodoCard,
...
)
// Column ì¼ì¹˜í•˜ëŠ” ê³³ì— DATA ì‚½ì…
fun Comment.toResponse(): CommentResponse{
...
}

```

</div></details>

<details>
<summary> User </summary><div>

- Controller

```Kotlin

@PostMapping("/signup")
fun createUser(@RequestBody userRequest: UserRequest): ResponseEntity<UserResponse> {
...
}
// ì‚¬ìš©ì ìƒì„±
...
fun login(@RequestBody userRequest: UserRequest): ResponseEntity<UserResponse>{
...
}
// ì‚¬ìš©ì ë¡œê·¸ì¸

```

- Service

```Kotlin

fun createUser(request: UserRequest): UserResponse
//ì‚¬ìš©ì ìƒì„±

fun login(request: UserRequest): UserResponse
// ì‚¬ìš©ì ë¡œê·¸ì¸

```

- Repository

```Kotlin

interface UserRepository: JpaRepository<User, Long> {
    fun findByEmailAndPassword(email: String, password: String): User
}

```

- Model

```Kotlin

class User(
)
...
// Column ì¼ì¹˜í•˜ëŠ” ê³³ì— DATA ì‚½ì…
fun User.toResponse(): UserResponse {
...
}

```

</div></details>

## í™˜ê²½ ì„¤ì •<br>
![Kotlin](https://img.shields.io/badge/kotlin-%237F52FF.svg?style=for-the-badge&logo=kotlin&logoColor=white)
![IntelliJ IDEA](https://img.shields.io/badge/IntelliJIDEA-000000.svg?style=for-the-badge&logo=intellij-idea&logoColor=white) 
![Jdk17](https://img.shields.io/badge/jdk17-%23ED8B00.svg?style=for-the-badge&logo=openjdk&logoColor=white"/)
![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![Swagger](https://img.shields.io/badge/-Swagger-%23Clojure?style=for-the-badge&logo=swagger&logoColor=white)
